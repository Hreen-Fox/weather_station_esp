// config_manager.h - Заголовочный файл управления конфигурацией устройства

// Защита от повторного включения файла (include guard)
#ifndef CONFIG_MANAGER_H
#define CONFIG_MANAGER_H

// Зависимости
#include <Arduino.h>

/**
 * Структура системной конфигурации
 * 
 * Хранит все настройки устройства, которые сохраняются во флеш-памяти:
 * - Wi-Fi параметры подключения
 * - Параметры работы сервера
 * - Настройки генерации данных датчиков
 * 
 * Размер структуры: ~120 байт (оптимально для хранения во флеш-памяти)
 */
struct SystemConfig {
  char wifiSSID[32];        // Имя Wi-Fi сети (макс. 31 символ + терминатор)
  char wifiPassword[64];    // Пароль Wi-Fi сети (макс. 63 символа + терминатор)
  uint8_t maxClients;       // Максимальное количество клиентов точки доступа AP
  uint16_t updateInterval;  // Интервал обновления данных датчиков (секунды)
  bool firstSetupDone;      // Флаг завершения первоначальной настройки
  float tempBase;           // Базовая температура для генерации (°C)
  float tempAmplitude;      // Амплитуда колебаний температуры (°C)
  float humBase;            // Базовая влажность для генерации (%)
  float humAmplitude;       // Амплитуда колебаний влажности (%)
};

// Объявление глобальной переменной конфигурации
extern SystemConfig config;

// Функция загрузки конфигурации из файловой системы
void loadConfig();
// Функция сохранения конфигурации в файловую систему
void saveConfig();
// Функция проверки завершения первоначальной настройки
bool isFirstSetupDone();

#endif